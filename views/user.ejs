<!DOCTYPE html>
<html lang="en">
  <head>
    <title>Fitness Tracker</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link rel="stylesheet"  type="text/css" href="style.css" />
  </head>
  <body>
    <header>
      <h1>Fitness Tracker</h1>
      <nav>
        <a href="../login">Logout</a>
      </nav>  
    </header>

    <section class="home-container">

      <div class="stats">
        <div class="stat-card">
          <h2>Total Workouts</h2>
          <%= stats.totalWorkouts || 0 %>
        </div>
        <div class="stat-card">
          <h2>Calories Burned</h2>
          <%= stats.totalCalories || 0 %>
        </div>
        <div class="stat-card">
          <h2>Minutes Exercised Workouts</h2>
          <%= stats.totalMinutes || 0 %>
        </div>
        <div class="stat-card">
          <h2>This Week</h2>
          <%= stats.thisWeek || 0 %>
        </div>
      </div>

      <% if (workouts && workouts.length > 0) { %>
        <div class="card-grid">
            <% workouts.forEach(function(workout) { %>
                <div class="workout-card">
                    <div class="workout-header">
                        <h3><%= workout.name %></h3>
                    </div>
                    <div class="workout-body">
                        <div class="workout-stats">
                            <div class="stat">
                                <h2>Date</h2>
                                <%= new Date(workout.workout_date).toLocaleDateString() %>
                            </div>
                            <div class="stat">
                                <h2>Duration</h2>
                                <%= workout.duration_minutes || '-' %> min
                            </div>
                            <div class="stat">
                                <h2>Calories</h2>
                                <%= workout.total_calories || 0 %>
                            </div>
                        </div>
                        <% if (workout.notes) { %>
                            <p style="color: var(--text-light); font-size: 0.9rem;"><%= workout.notes %></p>
                        <% } %>
                        <div class="workout-actions">
                            <a href="/user/workouts/<%= workout.id %>">View Details</a>
                            <a href="/user/workouts/<%= workout.id %>/edit">Edit</a>
                            <% if (!workout.is_shared) { %>
                                <form action="/user/workouts/<%= workout.id %>/share" method="POST" style="display: inline;">
                                    <button type="submit">Share</button>
                                </form>
                            <% } else { %>
                                <span>Shared</span>
                            <% } %>
                        </div>
                    </div>
                </div>
            <% }); %>
        </div>
      <% } else { %>
          <div>
              <div>üèãÔ∏è</div>
              <h3>No workouts yet</h3>
              <p>Start logging your workouts to track your progress!</p>
              <a href="/user/workouts/new" style="margin-top: 15px;">Log Your First Workout</a>
          </div>
      <% } %>
      
    </section>
  </body>
</html>
